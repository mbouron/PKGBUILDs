From 8a3d48709a208e1360c4f58eb0e1cc61c48dc978 Mon Sep 17 00:00:00 2001
From: Matthieu Bouron <matthieu.bouron@gmail.com>
Date: Tue, 24 Apr 2018 17:22:48 +0200
Subject: [PATCH 12/13] CHROMIUM: wip

---
 .../boot/dts/rockchip/rk3399-gru-bob-r0.dts   | 19 -------------------
 .../boot/dts/rockchip/rk3399-gru-bob-r2.dts   | 19 -------------------
 .../boot/dts/rockchip/rk3399-gru-bob-r4.dts   |  6 ------
 .../boot/dts/rockchip/rk3399-gru-bob.dtsi     | 15 ++++-----------
 4 files changed, 4 insertions(+), 55 deletions(-)

diff --git a/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r0.dts b/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r0.dts
index 83af09b8018c..99df3ac743e2 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r0.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r0.dts
@@ -51,25 +51,6 @@
 		     "google,bob", "google,gru", "rockchip,rk3399";
 };
 
-/*
- * HACK: Disabling the ddr auto power down on bob board, since the caused by
- * the ripple of hardware.
- */
-&dmc {
-	rockchip,pd_idle_dis_freq = <200000000>;
-	rockchip,sr_idle_dis_freq = <200000000>;
-	rockchip,sr_mc_gate_idle_dis_freq = <200000000>;
-	rockchip,standby_idle_dis_freq = <200000000>;
-};
-
-&dmc_opp_table {
-	opp02 {
-		opp-suspend;
-	};
-
-	/delete-node/ opp03;
-};
-
 &pp3000_sd_slot {
 	/delete-property/ enable-active-high;
 	gpio = <&gpio4 29 GPIO_ACTIVE_LOW>;
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r2.dts b/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r2.dts
index bb4b7d68c00f..ef9f8e4abe64 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r2.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r2.dts
@@ -51,25 +51,6 @@
 		     "google,bob", "google,gru", "rockchip,rk3399";
 };
 
-/*
- * HACK: Disabling the ddr auto power down on bob board, since the caused by
- * the ripple of hardware.
- */
-&dmc {
-	rockchip,pd_idle_dis_freq = <200000000>;
-	rockchip,sr_idle_dis_freq = <200000000>;
-	rockchip,sr_mc_gate_idle_dis_freq = <200000000>;
-	rockchip,standby_idle_dis_freq = <200000000>;
-};
-
-&dmc_opp_table {
-	opp02 {
-		opp-suspend;
-	};
-
-	/delete-node/ opp03;
-};
-
 /*
  * HACK for -rev2~3 to bump up voltage
  *
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r4.dts b/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r4.dts
index ed0c81a5089c..45799da10bd7 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r4.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-gru-bob-r4.dts
@@ -54,9 +54,3 @@
 		     "google,bob-rev5", "google,bob-rev4",
 		     "google,bob", "google,gru", "rockchip,rk3399";
 };
-
-&dmc {
-	rockchip,pd_idle_dis_freq = <800000000>;
-	rockchip,sr_idle_dis_freq = <800000000>;
-	rockchip,sr_mc_gate_idle_dis_freq = <800000000>;
-};
diff --git a/arch/arm64/boot/dts/rockchip/rk3399-gru-bob.dtsi b/arch/arm64/boot/dts/rockchip/rk3399-gru-bob.dtsi
index f62f4a601103..056c90660133 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-gru-bob.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3399-gru-bob.dtsi
@@ -79,7 +79,7 @@
 		pinctrl-0 = <&touch_int_l &touch_reset_l>;
 
 		interrupt-parent = <&gpio3>;
-		interrupts = <13 IRQ_TYPE_EDGE_FALLING>;
+		interrupts = <13 IRQ_TYPE_LEVEL_LOW>;
 
 		reset-gpios = <&gpio4 26 GPIO_ACTIVE_LOW>;
 	};
@@ -94,7 +94,7 @@
 		pinctrl-0 = <&trackpad_int_l>;
 
 		interrupt-parent = <&gpio1>;
-		interrupts = <4 IRQ_TYPE_EDGE_FALLING>;
+		interrupts = <4 IRQ_TYPE_LEVEL_LOW>;
 
 		wakeup-source;
 	};
@@ -122,19 +122,12 @@
 
 	cr50@0 {
 		compatible = "google,cr50";
+
 		reg = <0>;
-		spi-max-frequency = <800000>; // TODO: review later
+		spi-max-frequency = <800000>;
 	};
 };
 
-&target {
-	temperature = <70000>;
-};
-
-&threshold {
-	temperature = <65000>;
-};
-
 &mvl_wifi {
 	marvell,caldata_00_txpwrlimit_2g_cfg_set = /bits/ 8 <
 0x01 0x00 0x06 0x00 0x30 0x02 0x89 0x01 0x24 0x00 0x67 0x09 0x14 0x01 0x00 0x0d
-- 
2.17.0

